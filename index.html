<html>
	<head>
		<title>INASRA</title>
		<script type="text/javascript">
			function render(wordgrid) {
				document.getElementById("inasra").innerHTML=wordgrid.map(function(line) { return line.join("") }).join("\n")
			}
			function fetchwords() {
				fetch("/wordgrid.json").then(async function(response) {
					//console.log(await response.text());
					var json = JSON.parse(await response.text());
					render(json);
				});
			}
		</script>
	</head>
	<body>
		<h1>INASRA</h1>
		<pre id="inasra" style="letter-spacing: 0.5em">
		</pre>
		<input id="clueinsert" name="insert" />
		<input id="submit" type="button" value="Submit" />
		<script type="text/javascript">
			fetchwords(); //document.addEventListener("DOMDocumentLoaded", fetchwords);
			document.getElementById("submit").addEventListener("click", function() {
				var clue = document.getElementById("clueinsert").value;
				if(!/^[a-z]+\s[0-9]+\s[0-9]+$/.test(clue))
					alert("invalid format!")
				else fetch("/clueinsert", {
					method: "post",
					body: JSON.stringify({"insert": clue}),
				}).then(function() {
					fetchwords();
				})
			})
		</script>
	</body>
</html>
